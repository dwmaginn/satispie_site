---
import Layout from '~/layouts/Layout.astro';
import { Icon } from 'astro-icon/components';

export const prerender = true;

const metadata = {
  title: 'Apply Today - Join the SatisPie Team',
  description: 'Join our team at SatisPie Manufacturing. We\'re looking for passionate individuals to help us create the best pies, waffles, and pancakes in the industry.',
  ignoreTitleTemplate: true,
};

const openPositions = [
  {
    title: 'Production Line Worker',
    department: 'Manufacturing',
    location: 'Main Facility',
    type: 'Full-time',
    experience: 'Entry Level',
    description: 'Join our production team to help create our delicious products. Training provided.',
  },
  {
    title: 'Quality Control Specialist',
    department: 'Quality Assurance',
    location: 'Main Facility',
    type: 'Full-time',
    experience: '2+ years',
    description: 'Ensure our products meet the highest quality standards. SQF experience preferred.',
  },
  {
    title: 'Maintenance Technician',
    department: 'Facilities',
    location: 'Main Facility',
    type: 'Full-time',
    experience: '3+ years',
    description: 'Maintain and repair production equipment. Mechanical experience required.',
  },
  {
    title: 'Sales Representative',
    department: 'Sales',
    location: 'Remote',
    type: 'Full-time',
    experience: '1+ years',
    description: 'Build relationships with retail and foodservice customers. Travel required.',
  },
];
---

<Layout metadata={metadata}>
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-blue-50 to-orange-50 py-20 md:py-28">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6">
          Join the <span class="text-blue-600">SatisPie</span> Team
        </h1>
        <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
          We're looking for passionate individuals to help us create the best pies, waffles, and pancakes in the industry. Join our growing team and be part of something delicious.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="#application-form"
            class="inline-flex items-center justify-center px-8 py-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200"
          >
            Apply Now
            <Icon name="tabler:arrow-down" class="w-5 h-5 ml-2" />
          </a>
          <a
            href="#open-positions"
            class="inline-flex items-center justify-center px-8 py-4 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:border-blue-600 hover:text-blue-600 transition-colors duration-200"
          >
            View Positions
            <Icon name="tabler:briefcase" class="w-5 h-5 ml-2" />
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Work With Us -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          Why Work With Us?
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          At SatisPie, we believe in creating not just great products, but a great workplace too.
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="text-center">
          <div class="bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
            <Icon name="tabler:heart" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Great Benefits</h3>
          <p class="text-gray-600">
            Health insurance, paid time off, retirement plans, and employee discounts on our products.
          </p>
        </div>

        <div class="text-center">
          <div class="bg-orange-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
            <Icon name="tabler:users" class="w-8 h-8 text-orange-600" />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Team Environment</h3>
          <p class="text-gray-600">
            Work with passionate people who love what they do and support each other's growth.
          </p>
        </div>

        <div class="text-center">
          <div class="bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
            <Icon name="tabler:trending-up" class="w-8 h-8 text-green-600" />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Growth Opportunities</h3>
          <p class="text-gray-600">
            Advance your career with training programs and opportunities for promotion.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Open Positions -->
  <section id="open-positions" class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          Open Positions
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Browse our current openings and find the perfect role for you
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-8">
        {openPositions.map((position) => (
          <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow">
            <div class="flex items-start justify-between mb-4">
              <h3 class="text-xl font-bold text-gray-900">{position.title}</h3>
              <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                {position.type}
              </span>
            </div>
            <div class="space-y-2 mb-4">
              <div class="flex items-center gap-2 text-sm text-gray-600">
                <Icon name="tabler:building" class="w-4 h-4" />
                {position.department}
              </div>
              <div class="flex items-center gap-2 text-sm text-gray-600">
                <Icon name="tabler:map-pin" class="w-4 h-4" />
                {position.location}
              </div>
              <div class="flex items-center gap-2 text-sm text-gray-600">
                <Icon name="tabler:briefcase" class="w-4 h-4" />
                {position.experience} experience
              </div>
            </div>
            <p class="text-gray-600 mb-4">{position.description}</p>
            <button
              class="w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200"
              onclick="selectPosition('{position.title}')"
            >
              Apply for this position
              <Icon name="tabler:arrow-right" class="w-4 h-4 ml-2" />
            </button>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Application Form -->
  <section id="application-form" class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          Apply Today
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Complete the form below to submit your application. We'll review your information and get back to you within 3-5 business days.
        </p>
      </div>

      <div class="bg-gray-50 rounded-2xl p-8 shadow-lg">
        <form
          action="https://formspree.io/f/YOUR_FORM_ID"
          method="POST"
          class="space-y-8"
        >
          <!-- Personal Information -->
          <div class="bg-white rounded-xl p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-6">Personal Information</h3>
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">
                  First Name *
                </label>
                <input
                  type="text"
                  id="firstName"
                  name="firstName"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2">
                  Last Name *
                </label>
                <input
                  type="text"
                  id="lastName"
                  name="lastName"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                  Email Address *
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                  Phone Number *
                </label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
            </div>
          </div>

          <!-- Position Information -->
          <div class="bg-white rounded-xl p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-6">Position Information</h3>
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label for="position" class="block text-sm font-medium text-gray-700 mb-2">
                  Position of Interest *
                </label>
                <select
                  id="position"
                  name="position"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                  <option value="">Select a position</option>
                  <option value="Production Line Worker">Production Line Worker</option>
                  <option value="Quality Control Specialist">Quality Control Specialist</option>
                  <option value="Maintenance Technician">Maintenance Technician</option>
                  <option value="Sales Representative">Sales Representative</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div>
                <label for="experience" class="block text-sm font-medium text-gray-700 mb-2">
                  Years of Experience
                </label>
                <select
                  id="experience"
                  name="experience"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                  <option value="">Select experience level</option>
                  <option value="0-1 years">0-1 years</option>
                  <option value="1-3 years">1-3 years</option>
                  <option value="3-5 years">3-5 years</option>
                  <option value="5+ years">5+ years</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Availability -->
          <div class="bg-white rounded-xl p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-6">Availability</h3>
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label for="startDate" class="block text-sm font-medium text-gray-700 mb-2">
                  Available Start Date
                </label>
                <input
                  type="date"
                  id="startDate"
                  name="startDate"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label for="schedule" class="block text-sm font-medium text-gray-700 mb-2">
                  Preferred Schedule
                </label>
                <select
                  id="schedule"
                  name="schedule"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                  <option value="">Select schedule</option>
                  <option value="Full-time">Full-time</option>
                  <option value="Part-time">Part-time</option>
                  <option value="Seasonal">Seasonal</option>
                  <option value="Flexible">Flexible</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Additional Information -->
          <div class="bg-white rounded-xl p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-6">Additional Information</h3>
            <div class="space-y-6">
              <div>
                <label for="resume" class="block text-sm font-medium text-gray-700 mb-2">
                  Resume/CV
                </label>
                <input
                  type="file"
                  id="resume"
                  name="resume"
                  accept=".pdf,.doc,.docx"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
                <p class="text-sm text-gray-500 mt-1">Accepted formats: PDF, DOC, DOCX (max 5MB)</p>
              </div>
              <div>
                <label for="coverLetter" class="block text-sm font-medium text-gray-700 mb-2">
                  Cover Letter
                </label>
                <textarea
                  id="coverLetter"
                  name="coverLetter"
                  rows="4"
                  placeholder="Tell us why you'd like to join the SatisPie team..."
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                ></textarea>
              </div>
              <div>
                <label for="references" class="block text-sm font-medium text-gray-700 mb-2">
                  References
                </label>
                <textarea
                  id="references"
                  name="references"
                  rows="3"
                  placeholder="Please provide contact information for 2-3 professional references..."
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                ></textarea>
              </div>
            </div>
          </div>

          <!-- Equal Opportunity -->
          <div class="bg-white rounded-xl p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-6">Equal Opportunity</h3>
            <div class="space-y-4">
              <div>
                <label class="flex items-start gap-3">
                  <input
                    type="checkbox"
                    name="veteran"
                    class="mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                  />
                  <span class="text-sm text-gray-700">
                    I am a protected veteran (disabled veteran, recently separated veteran, active duty wartime or campaign badge veteran, or Armed Forces service medal veteran)
                  </span>
                </label>
              </div>
              <div>
                <label class="flex items-start gap-3">
                  <input
                    type="checkbox"
                    name="disability"
                    class="mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                  />
                  <span class="text-sm text-gray-700">
                    I have a disability (physical or mental impairment that substantially limits one or more major life activities)
                  </span>
                </label>
              </div>
              <p class="text-sm text-gray-600">
                SatisPie Manufacturing is an equal opportunity employer. We do not discriminate on the basis of race, color, religion, sex, national origin, age, disability, or any other characteristic protected by law.
              </p>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="text-center">
            <button
              type="submit"
              class="inline-flex items-center justify-center px-8 py-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200 text-lg"
            >
              <Icon name="tabler:send" class="w-5 h-5 mr-2" />
              Submit Application
            </button>
            <p class="text-sm text-gray-500 mt-4">
              By submitting this application, you agree to our privacy policy and consent to being contacted regarding your application.
            </p>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Contact Information -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-gray-900 mb-8">Questions About Working With Us?</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div>
          <Icon name="tabler:phone" class="w-8 h-8 text-blue-600 mx-auto mb-4" />
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Call Us</h3>
          <p class="text-gray-600">(555) 123-4567</p>
          <p class="text-sm text-gray-500">Mon-Fri, 8AM-5PM</p>
        </div>
        <div>
          <Icon name="tabler:mail" class="w-8 h-8 text-blue-600 mx-auto mb-4" />
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Email Us</h3>
          <p class="text-gray-600">careers@satispie.com</p>
          <p class="text-sm text-gray-500">We'll respond within 24 hours</p>
        </div>
        <div>
          <Icon name="tabler:map-pin" class="w-8 h-8 text-blue-600 mx-auto mb-4" />
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Visit Us</h3>
          <p class="text-gray-600">123 Baking Street</p>
          <p class="text-sm text-gray-500">Anytown, CA 90210</p>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  // Position selection functionality
  function selectPosition(positionTitle) {
    const positionSelect = document.getElementById('position');
    if (positionSelect) {
      positionSelect.value = positionTitle;
      // Scroll to the application form
      document.getElementById('application-form').scrollIntoView({ behavior: 'smooth' });
    }
  }

  // Form validation and submission
  function initApplicationForm() {
    const form = document.querySelector('form');
    if (form) {
      form.addEventListener('submit', (e) => {
        // Basic validation
        const requiredFields = form.querySelectorAll('[required]');
        let isValid = true;

        requiredFields.forEach(field => {
          if (!field.value.trim()) {
            isValid = false;
            field.classList.add('border-red-500');
          } else {
            field.classList.remove('border-red-500');
          }
        });

        if (!isValid) {
          e.preventDefault();
          alert('Please fill in all required fields.');
          return;
        }

        // Show success message
        alert('Thank you for your application! We will review your information and contact you within 3-5 business days.');
      });
    }
  }

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', initApplicationForm);
  document.addEventListener('astro:after-swap', initApplicationForm);
</script>
