---
// This component provides client-side form handling for better UX
---

<script>
  // Form submission handler
  function handleFormSubmission(formId) {
    const form = document.getElementById(formId);
    const feedback = document.getElementById('formFeedback');
    
    if (!form || !feedback) return;
    
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Show loading state
      const submitButton = form.querySelector('button[type="submit"]');
      const originalText = submitButton.textContent;
      submitButton.textContent = 'Sending...';
      submitButton.disabled = true;
      
      try {
        const formData = new FormData(form);
        const response = await fetch(form.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          // Success
          feedback.className = 'mt-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded';
          feedback.textContent = 'Thank you! Your message has been sent successfully. We will get back to you within 1-3 business days.';
          form.reset();
        } else {
          // Error
          feedback.className = 'mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded';
          feedback.textContent = 'Sorry, there was an error sending your message. Please try again or contact us directly.';
        }
      } catch (error) {
        // Network error
        feedback.className = 'mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded';
        feedback.textContent = 'Sorry, there was an error sending your message. Please try again or contact us directly.';
      }
      
      // Reset button
      submitButton.textContent = originalText;
      submitButton.disabled = false;
      
      // Show feedback
      feedback.classList.remove('hidden');
      
      // Hide feedback after 5 seconds
      setTimeout(() => {
        feedback.classList.add('hidden');
      }, 5000);
    });
  }
  
  // Initialize form handlers when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    handleFormSubmission('contactForm');
    handleFormSubmission('applyForm');
  });
</script> 